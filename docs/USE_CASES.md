# Database Studio - ユースケース分析

## 対象ユーザー

**誰が使うか:** database-framework を使用する開発者

**いつ使うか:**
- 開発中のデバッグ
- データの確認・検証
- 問題調査

---

## 主要ユースケース

### UC1: データのデバッグ

**シナリオ:** 「アプリでデータが正しく表示されない。DBに何が保存されているか確認したい」

**必要な操作:**
1. FDBに接続する
2. 該当ディレクトリを探す
3. Type を選択する
4. Items の中から該当データを探す
5. JSON の中身を確認する

**必要な機能:**
- ディレクトリ階層の表示
- Type 一覧の表示
- Items 一覧の表示
- Item の JSON 表示
- （あれば便利）Items の検索/フィルタ

---

### UC2: データ保存の確認

**シナリオ:** 「コードを書いた。データがちゃんと保存されたか確認したい」

**必要な操作:**
1. 該当の Type を開く
2. 新しく追加された Item を探す
3. 保存された値を確認する

**必要な機能:**
- Items 一覧（新しい順でソートできると便利）
- Item の JSON 表示
- データのコピー（ログと比較用）

---

### UC3: スキーマの把握

**シナリオ:** 「このデータストアにどんな Type が定義されているか知りたい」

**必要な操作:**
1. ディレクトリツリーを展開する
2. 各ディレクトリの Types を確認する

**必要な機能:**
- ディレクトリ階層の表示
- Type 一覧（アイテム数付き）

---

### UC4: Index の確認

**シナリオ:** 「Index が正しく設定されているか確認したい」

**必要な操作:**
1. 該当ディレクトリを選択する
2. 定義されている Index を確認する
3. Index の状態を確認する

**必要な機能:**
- Index 一覧の表示
- Index の状態（readable/writeOnly/disabled）表示

**頻度:** 低い（初期設定時や問題発生時のみ）

---

## 機能の優先度

### 必須（Must Have）

| 機能 | 理由 |
|------|------|
| FDB 接続 | 基本機能 |
| ディレクトリ階層表示 | データの場所を探すため |
| Type 一覧表示 | 何のデータがあるか把握するため |
| Items 一覧表示 | データを探すため |
| Item JSON 表示 | データの中身を確認するため |

### 重要（Should Have）

| 機能 | 理由 |
|------|------|
| アイテム数表示 | データ量の把握 |
| JSON のコピー | デバッグ用にコピーしたい |
| Items のソート | 新しいデータを見つけやすくする |

### あれば便利（Nice to Have）

| 機能 | 理由 |
|------|------|
| Items の検索/フィルタ | 大量データから探す |
| Index 一覧表示 | Index の確認（頻度低） |
| Index 詳細表示 | Index の中身確認（頻度低） |

### 不要かもしれない

| 機能 | 理由 |
|------|------|
| 常時表示の Inspector | Index 確認の頻度が低い |
| Index 詳細の独立画面 | 使用頻度が非常に低い |

---

## UI 構成の再考

### 現状の問題

```
現状: 4カラム構成
┌─────────┬──────────┬──────────┬──────────┐
│Sidebar  │ Content  │ Detail   │Inspector │
│(Tree)   │ (Table)  │ (JSON)   │(Indexes) │
└─────────┴──────────┴──────────┴──────────┘

問題:
- Inspector（Index表示）は常時必要ない
- 4カラムは横幅を取りすぎる
- Detail と Inspector の使い分けが曖昧
```

### 提案: 3カラム構成

```
提案: 3カラム構成
┌─────────┬──────────────────┬──────────────────┐
│Sidebar  │    Content       │     Detail       │
│         │                  │                  │
│Directory│    Items Table   │   Item Detail    │
│+ Types  │                  │   + Indexes(※)  │
└─────────┴──────────────────┴──────────────────┘

※ Indexes は Detail の下部にセクションとして表示
  または、必要な時だけ Inspector を開く
```

### メリット

1. **シンプル**: 主要ユースケースに集中
2. **横幅節約**: 3カラムで十分な情報表示
3. **明確な役割**: Tree → Table → Detail の流れ

### Indexes の扱い

**案A:** Detail ペインの下部にセクションとして統合
**案B:** Inspector はオプション（デフォルト非表示）
**案C:** 別ウィンドウ/シートで表示

---

## 結論

**核となる機能:**
1. ディレクトリ + Type のツリー表示
2. Items のテーブル表示
3. Item の JSON 表示

**削減候補:**
- 常時表示の Inspector → オプション化または統合
- IndexDetailView → 必要になるまで保留

**追加検討:**
- Items の検索/フィルタ機能
- JSON のコピー機能
