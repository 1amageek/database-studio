# Database Studio - 画面設計ドキュメント

## アプリケーション概要

Database Studio は FoundationDB + database-framework で構築されたデータストアを閲覧するための macOS アプリケーション。

**主な目的:**
- データストアの構造を可視化する
- 保存されているデータを閲覧する
- デバッグや開発時のデータ確認に使用する

**対象ユーザー:**
- database-framework を使用する開発者

---

## 画面一覧

### 1. MainView（メインウィンドウ）

**役割:** アプリケーションのメインレイアウトを提供

**構成:**
- NavigationSplitView による 3 ペイン構成
- ツールバーに接続状態表示

**ユースケース:**
- アプリ起動時のエントリーポイント

---

### 2. DirectoryTreeView（サイドバー）

**役割:** データストアのディレクトリ階層を表示

**表示内容:**
- ディレクトリの階層構造（フォルダアイコン）
- 各ディレクトリ内の Types（キューブアイコン + アイテム数）

**ユースケース:**
- ディレクトリ構造を把握する
- 閲覧したい Type を選択する

**操作:**
- ディレクトリを展開/折りたたみ
- Type を選択 → Items 一覧を表示

---

### 3. ItemsContentView（コンテンツペイン）

**役割:** 選択された Type の Items 一覧を表示

**表示内容:**
- Items のテーブル（ID, プレビュー, サイズ）

**ユースケース:**
- Type 内のデータ一覧を確認する
- 詳細を見たい Item を選択する

**操作:**
- Item を選択 → 詳細を表示

---

### 4. DetailPaneView（詳細ペイン）

**役割:** 選択された Item の詳細データを表示

**表示内容:**
- Item ID
- Type 名
- JSON データ（キー・値のペア）
- Raw データ

**ユースケース:**
- Item の中身を確認する
- JSON 構造を把握する

---

### 5. InspectorPaneView（インスペクター）

**役割:** 選択されたディレクトリのメタ情報を表示

**表示内容:**
- Indexes 一覧（名前、種類、状態）
- 選択中の Type 情報

**ユースケース:**
- どんな Index が定義されているか確認する
- Index の状態（readable/writeOnly/disabled）を確認する

---

### 6. ConnectionSettingsView（接続設定）

**役割:** FDB クラスタへの接続設定

**表示内容:**
- クラスタファイルパス
- ルートディレクトリパス

**ユースケース:**
- 初回接続時に設定する
- 別のクラスタ/ディレクトリに切り替える

---

### 7. IndexDetailView（Index 詳細）

**役割:** 選択された Index の詳細情報を表示

**表示内容:**
- Index 名、種類、状態
- エントリ数
- サンプルエントリ

**ユースケース:**
- Index の中身を確認する
- Index が正しく構築されているか確認する

**現状:** Inspector から遷移する導線が未実装

---

## 画面遷移フロー

```
┌─────────────────────────────────────────────────────────────┐
│                        MainView                              │
│  ┌──────────┬───────────────┬───────────────┬────────────┐  │
│  │ Sidebar  │   Content     │    Detail     │ Inspector  │  │
│  │          │               │               │            │  │
│  │ Directory│   Items       │    Item       │  Indexes   │  │
│  │ TreeView │   Content     │    Detail     │  + Info    │  │
│  │          │   View        │    View       │            │  │
│  └──────────┴───────────────┴───────────────┴────────────┘  │
└─────────────────────────────────────────────────────────────┘
       │              │               │              │
       │              │               │              │
       ▼              ▼               ▼              ▼
   Type選択 ───→ Items読込 ───→ Item選択 ───→ 詳細表示
```

---

## 検討事項

### Q1: 4カラムは必要か？

**現状:** Sidebar + Content + Detail + Inspector

**代替案:**
- 3カラム: Inspector を Detail に統合
- 2カラム: Sidebar + メイン（タブ切り替え）

### Q2: Inspector の必要性

**Inspector の役割:**
- Indexes 表示
- Type 情報表示

**検討:**
- Indexes は頻繁に見るか？
- Detail に統合可能か？

### Q3: IndexDetailView の位置づけ

**現状:** 独立した View だが、遷移導線がない

**検討:**
- Inspector から遷移させるか
- 別ウィンドウで開くか
- 削除するか
